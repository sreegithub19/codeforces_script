# name: Run Jupyter Notebook with Java and Maven Dependencies

# on:
#   push:
#     branches:
#       - python_

# jobs:
#   run_notebook:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v2

#       - name: Install Java 8, Maven, and Jupyter
#         run: |
#           sudo apt-get update
#           sudo apt-get install -y openjdk-8-jdk maven  # Install Java 8
#           pip install jupyter
          
#       - name: Install IJava kernel
#         run: |
#           git clone https://github.com/SpencerPark/IJava.git
#           cd IJava
#           ./gradlew install

#       - name: Run Jupyter Notebook
#         run: |
#           cd execute
#           jupyter nbconvert --to notebook --execute notebook_java.ipynb --output executed_notebook_java.ipynb
#           cd ..
#       - name: Convert Executed Notebook to HTML
#         run: |
#           cd execute
#           jupyter nbconvert --to html executed_notebook_java.ipynb --output executed_notebook_java
#           cd ..
#       - name: List files
#         run: ls -la  # Debugging step

#       - name: Upload Notebook and HTML as Artifacts
#         uses: actions/upload-artifact@v4
#         with:
#           name: executed_notebooks
#           path: |
#             execute/executed_notebook_java.ipynb
#             execute/executed_notebook_java.html


name: Run Jupyter Notebook with Java and Maven Dependencies

on:
  push:
    branches:
      - python_

jobs:
  run_notebook:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set up Docker container
        run: |
          pip install jupyter jupyter_client  
          sudo apt update -q
          sudo apt-get install -q openjdk-11-jdk-headless
          curl -L https://github.com/SpencerPark/IJava/releases/download/v1.3.0/ijava-1.3.0.zip -o ijava-kernel.zip
          unzip -q ijava-kernel.zip -d ijava-kernel && cd ijava-kernel && python3 install.py --sys-prefix
          jupyter kernelspec list

      - name: Set up IJava
        run: | 
          cd execute
          jupyter nbconvert --to notebook --execute notebook_java2.ipynb --output executed_notebook_java2.ipynb
          jupyter nbconvert --to html executed_notebook_java2.ipynb --output executed_notebook_java2
          cd .. 
        
      # - name: Upload Notebook and HTML as Artifacts
      #   uses: actions/upload-artifact@v4
      #   with:
      #     name: executed_notebooks
      #     path: |
      #       execute/executed_notebook_java2.ipynb
      #       execute/executed_notebook_java2.html