name: C and C++ Build and Run

on:
  push:
    branches:
      - cpp_  # Change this to your default branch
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up GCC
        run: sudo apt-get install g++

      - name: Compile C++ programs
        run: |
          cd cpp_folder  # Change to the directory containing C++ files
          for file in *.cpp; do
            g++ "$file" -o "${file%.cpp}"  # Compile each C++ file to an executable
          done

      - name: Run C++ programs
        run: |
          cd cpp_folder
          for exe in *; do
            if [[ -x "$exe" ]]; then  # Check if it is an executable
              ./"$exe"  # Run the executable
            fi
          done

      - name: Compile C programs
        run: |
          cd c_folder  # Change to the directory containing C files
          for file in *.c; do
            gcc "$file" -o "${file%.c}"  # Compile each C file to an executable
          done

      - name: Run C programs
        run: |
          cd c_folder
          for exe in *; do
            if [[ -x "$exe" ]]; then  # Check if it is an executable
              ./"$exe"  # Run the executable
            fi
          done
