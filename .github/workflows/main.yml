# name: SCILAB Hello World Workflow

# on:
#   push:
#     branches:
#       - scilab_
#   # pull_request:
#   #   branches:
#   #     - main

# jobs:
#   run-scilab:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout the code
#         uses: actions/checkout@v2

#       - name: Install Scilab
#         run: |
#           sudo apt-get update
#           sudo apt-get install -y scilab

#       - name: Set up Python
#         uses: actions/setup-python@v2
#         with:
#           python-version: '3.8'

#       - name: Run all SCILAB files in the folder
#         run: |
#             mkdir -p output
#             # Make sure the script is executable
#             chmod +x ./run_all_scilab_files.sh
#             # Execute the shell script that runs all .m files
#             ./run_all_scilab_files.sh
#             scilab -nogui -e "disp('Hello, inline Scilab World!');"


#       # - name: Upload plot artifact
#       #   uses: actions/upload-artifact@v4
#       #   with:
#       #    name: all plots
#       #    path: output  # Path to the generated plot



name: Run GUI Application with Xvfb

on:
  push:
    branches:
      - scilab_

jobs:
  run-with-xvfb:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y xvfb scilab  # Install Xvfb and Scilab

    - name: Start Xvfb
      run: |
        Xvfb :99 &  # Start Xvfb in the background on display :99
        export DISPLAY=:99  # Set the DISPLAY variable

    - name: Run Scilab with GUI
      run: |
        scilab -nogui -e "disp('Hello, World!');"  # Run Scilab or your GUI application
