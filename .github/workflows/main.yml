name: Java CI

on:
  push:
    branches:
      - javac_  # Adjust the branch name as needed

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Build with Maven
      run: mvn clean install

    - name: Set up JDK 21
      uses: actions/setup-java@v2
      with:
        java-version: '21'
        distribution: 'temurin'
        java-package: 'jdk'
        architecture: 'x64'
        check-latest: false
        overwrite-settings: true
        job-status: 'success'

    - name: Compile and Run Java Files
      run: |
        #!/bin/bash

        #Compile and run the Kotlin code in Java file
        javac kotlin_.java && java kotlin_

        # Compile all Java files
        cd execute && javac *.java

        # Check if compilation was successful
        if [ $? -eq 0 ]; then
            # Run each Java file in sequence
            for file in *.java; do
                # Get the base name of the file (without .java)
                class_name="${file%.java}"
                echo "Class $class_name..."
                java "$class_name"
            done
        else
            echo "Compilation failed."
            exit 1
        fi


####################################################################################

# for Java 17

    # - name: Set up JDK 17
    #   uses: actions/setup-java@v2
    #   with:
    #     java-version: '17'
    #     distribution: 'temurin'
    #     java-package: 'jdk'
    #     architecture: 'x64'
    #     check-latest: false
    #     overwrite-settings: true
    #     job-status: 'success'

    # - name: Compile Java File
    #   run: |
    #     javac execute/_50A_py.java

    # - name: Run Java File
    #   run: |
    #     java -cp execute _50A_py

####################################################################################
