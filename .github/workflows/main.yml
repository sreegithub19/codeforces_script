name: Scala CI

on:
  push:
    branches:
      - scala_
  # pull_request:
  #   branches:
  #     - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up JDK 11
      uses: actions/setup-java@v2
      with:
        java-version: '11'
        distribution: 'temurin'
        java-package: 'jdk'
        architecture: 'x64'
        check-latest: false
        overwrite-settings: true
        job-status: 'success'

    - name: Set up Scala
      uses: olafurpg/setup-scala@v12
      with:
        scala-version: '2.13.8'  # The Scala version you want to use

    - name: Cache sbt dependencies
      uses: actions/cache@v3
      with:
        path: ~/.sbt/boot/scala*
        key: ${{ runner.os }}-sbt-${{ hashFiles('**/*.sbt') }}
        restore-keys: |
          ${{ runner.os }}-sbt-

    - name: Install sbt
      run: |
        curl -Lo sbt https://github.com/sbt/sbt/releases/download/v1.5.5/sbt-1.5.5.tgz
        tar xzf sbt-1.5.5.tgz
        sudo mv sbt /usr/local/bin/

    - name: Run tests with sbt
      run: sbt test  # This will run any tests defined in your project

    - name: Compile and run Scala project
      run: sbt run  # This will run the main method in your Scala project
