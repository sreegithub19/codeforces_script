name: Docker tmpfs Example with --mount

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Run Docker with tmpfs mount using --mount
      run: |
        docker run --rm \
          --mount type=tmpfs,dst=/tmp/my_tmpfs,size=100m \
          ubuntu bash -c "
            mkdir -p /tmp/my_tmpfs &&
            echo 'This is a temporary file in tmpfs' > /tmp/my_tmpfs/tempfile.txt &&
            cat /tmp/my_tmpfs/tempfile.txt &&
            ls /tmp/my_tmpfs
        "
